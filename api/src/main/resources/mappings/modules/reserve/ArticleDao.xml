<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bra.modules.cms.dao.ArticleDao">
    <select id="homeArticle" resultType="Article">
        SELECT
        a.id AS "id",
        a.weight AS "weight",
        a.description  AS "description",
        a.title AS  "title",
        d.copyfrom AS "articleData.copyfrom"
        FROM cms_article a,cms_article_data d
        WHERE a.id = d.id and a.del_flag = 0
        <if test="posid != null and posid != ''">
            AND a.posid LIKE CONCAT('%', #{posid}, '%')
        </if>
        <if test="category.id != null and category.id != ''">
            AND (a.category_id = #{category.id})
        </if>
        order by a.weight DESC limit #{sqlMap.pageSize}
    </select>

    <select id="viewArticle" resultType="Article">
        SELECT
        a.id AS "id",
        a.weight AS "weight",
        a.description  AS "description",
        a.title AS  "title",
        a.update_date AS "updateDate",
        d.copyfrom AS "articleData.copyfrom",
        d.content AS "articleData.content"
        FROM cms_article a,cms_article_data d
        WHERE a.id = d.id and a.del_flag = 0 and a.id = #{id}
    </select>
</mapper>